<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Additive Cipher</title>
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
    />
    <style>
      body {
        background-color: #f8f9fa;
        font-family: Arial, sans-serif;
      }

      .container {
        margin-top: 50px;
      }

      .table {
        width: 100%;
        border-collapse: collapse;
        border-spacing: 0;
      }

      th,
      td {
        border: 2px solid #007bff;
        padding: 10px;
        text-align: center;
        font-size: 18px;
      }

      th {
        background-color: #007bff;
        color: white;
      }

      th:first-child,
      td:first-child {
        border-left: 0;
      }

      th:last-child,
      td:last-child {
        border-right: 0;
      }

      tr:last-child td {
        border-bottom: 0;
      }

      .alphabet-item {
        display: block;
        font-weight: bold;
      }

      .index-item {
        font-weight: normal;
      }

      .cipher-section {
        margin-top: 30px;
      }

      .cipher-rules {
        font-weight: bold;
      }

      .form-group {
        margin-bottom: 20px;
      }

      .steps-list {
        list-style-type: decimal;
        padding-left: 20px;
      }

      .step-item {
        margin-bottom: 5px;
      }

      .steps-table {
        margin-top: 20px;
      }

      @media (max-width: 576px) {
        th,
        td {
          font-size: 14px;
          padding: 5px;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1 class="text-center mb-4">Alphabet Index</h1>
      <div class="table-responsive">
        <table class="table">
          <thead>
            <tr>
              <th>Alphabet</th>
              <th>Index</th>
            </tr>
          </thead>
          <tbody>
            <!-- Generate alphabet items dynamically -->
          </tbody>
        </table>
      </div>

      <div class="cipher-section">
        <h2 class="text-center">Additive Cipher</h2>
        <div class="cipher-rules">
          <p><strong>Encryption:</strong> Plaintext + Key mod 26</p>
          <p><strong>Decryption:</strong> Ciphertext - Key mod 26</p>
        </div>
        <div class="row">
          <div class="col-md-6">
            <h3 class="text-center">Encryption</h3>
            <div class="form-group">
              <label for="encryptionInput">Plaintext</label>
              <input
                type="text"
                class="form-control"
                id="encryptionInput"
                placeholder="Enter plaintext"
              />
            </div>
            <div class="form-group">
              <label for="encryptionKey">Key</label>
              <input
                type="number"
                class="form-control"
                id="encryptionKey"
                placeholder="Enter key"
              />
            </div>
            <button
              type="button"
              class="btn btn-primary btn-block"
              onclick="encrypt()"
            >
              Encrypt
            </button>
            <div class="form-group mt-3">
              <label for="encryptedText">Encrypted Text</label>
              <input
                type="text"
                class="form-control"
                id="encryptedText"
                placeholder="Encrypted text"
                readonly
              />
            </div>
            
          </div>
          <div class="col-md-6">
            <div class="steps-table">
              <table class="table">
                <thead>
                  <tr>
                    <th>Plaintext</th>
                    <th>Plaintext Alphabet Values</th>
                    <th>Key Adding All Values</th>
                    <th>Mod 26 Values</th>
                    <th>Ciphertext</th>
                  </tr>
                </thead>
                <tbody id="encryptionTableBody">
                  <!-- Encryption steps table body -->
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Function to generate alphabet items
        function generateAlphabet() {
          const tbody = document.querySelector("tbody");
          let index = 0;
          for (let i = 0; i < 7; i++) {
            // Number of rows
            const row = document.createElement("tr");
            for (let j = 0; j < 4; j++) {
              // Number of columns
              const letter = String.fromCharCode(65 + index); // Uppercase letters
              const lowercaseLetter = String.fromCharCode(97 + index); // Lowercase letters
              const cell = document.createElement("td");
              const alphabetItem = document.createElement("div");
              const indexItem = document.createElement("div");
              alphabetItem.classList.add("alphabet-item");
              indexItem.classList.add("index-item");
              alphabetItem.textContent = `${letter}/${lowercaseLetter}`;
              indexItem.textContent = index;
              cell.appendChild(alphabetItem);
              cell.appendChild(indexItem);
              row.appendChild(cell);
              index++;
            }
            tbody.appendChild(row);
          }
        }

        // Call the function to generate alphabet items
        generateAlphabet();
      });


      // Encryption function
      // function encrypt() {
      //   let plaintext = document
      //     .getElementById("encryptionInput")
      //     .value.toUpperCase();
      //   let key = parseInt(document.getElementById("encryptionKey").value);
      //   let steps = [];
      //   let ciphertext = "";

      //   // Add the "All Alphabet Values" as the second column header
      //   let alphabetValuesRow = [];
      //   for (let i = 0; i < 26; i++) {
      //     alphabetValuesRow.push(i);
      //   }
      //   steps.push(alphabetValuesRow);

      //   // Add the alphabet index values
      //   let alphabetIndexRow = [];
      //   for (let i = 0; i < 26; i++) {
      //     alphabetIndexRow.push(i);
      //   }
      //   steps.push(alphabetIndexRow);

      //   for (let i = 0; i < plaintext.length; i++) {
      //     let char = plaintext[i];
      //     let charCode = char.charCodeAt(0) - 65; // Convert letter to number value (A=0, B=1, ..., Z=25)

      //     if (charCode >= 0 && charCode <= 25) {
      //       // Step 1: Add key value to the character value
      //       let step1 = char;
      //       steps.push([step1]);

      //       let plaintextvalue = charCode;
      //       let step2 = plaintextvalue;
      //       steps[i + 2].push(step2);

      //       let keyAddingValue = charCode + key;
      //       let step3 = keyAddingValue;
      //       steps[i + 2].push(step3);

      //       // Step 3: Apply modulo 26
      //       let mod26Value = keyAddingValue % 26;
      //       let step4 = mod26Value;
      //       steps[i + 2].push(step4);

      //       // Step 4: Convert back to letter
      //       let encryptedCharCode = mod26Value + 65;
      //       let encryptedChar = String.fromCharCode(encryptedCharCode);
      //       let step5 = encryptedChar;
      //       steps[i + 2].push(step5);

      //       ciphertext += encryptedChar;
      //     } else {
      //       // Not a valid letter, keep as is
      //       ciphertext += char;
      //     }
      //   }

      //   // Display steps in the table
      //   displaySteps(steps);

      //   // Display ciphertext
      //   document.getElementById("encryptedText").value = ciphertext;
      // }

     
     

      function encrypt() {
    let plaintext = document
      .getElementById("encryptionInput")
      .value.toUpperCase();
    let key = parseInt(document.getElementById("encryptionKey").value);
    let steps = [];
    let ciphertext = "";
    let stepDescriptions = []; // Array to store step descriptions

    // Add the "All Alphabet Values" as the second column header
    let alphabetValuesRow = [];
    for (let i = 0; i < 26; i++) {
      alphabetValuesRow.push(i);
    }
    steps.push(alphabetValuesRow);

    // Add the alphabet index values
    let alphabetIndexRow = [];
    for (let i = 0; i < 26; i++) {
      alphabetIndexRow.push(i);
    }
    steps.push(alphabetIndexRow);

    for (let i = 0; i < plaintext.length; i++) {
      let char = plaintext[i];
      let charCode = char.charCodeAt(0) - 65; // Convert letter to number value (A=0, B=1, ..., Z=25)

      if (charCode >= 0 && charCode <= 25) {
        // Step 1: Add key value to the character value
        let step1 = `Add key (${key}) to plaintext value (${char})`;
        steps.push([step1]);

        let plaintextvalue = charCode;
        let step2 = `Plaintext value: ${plaintextvalue}`;
        steps[i + 2].push(step2);

        let keyAddingValue = charCode + key;
        let step3 = `Plaintext value (${plaintextvalue}) + Key (${key}) = ${keyAddingValue}`;
        steps[i + 2].push(step3);

        // Step 3: Apply modulo 26
        let mod26Value = keyAddingValue % 26;
        let step4 = `Modulo 26: ${keyAddingValue} % 26 = ${mod26Value}`;
        steps[i + 2].push(step4);

        // Step 4: Convert back to letter
        let encryptedCharCode = mod26Value + 65;
        let encryptedChar = String.fromCharCode(encryptedCharCode);
        let step5 = `Encrypted character: ${encryptedChar}`;
        steps[i + 2].push(step5);

        ciphertext += encryptedChar;
      } else {
        // Not a valid letter, keep as is
        ciphertext += char;
      }
    }

    // Display steps in the table
    displaySteps(steps);

    // Display ciphertext
    document.getElementById("encryptedText").value = ciphertext;
  }

     
     
      function displaySteps(steps) {
        let tableBody = document.getElementById("encryptionTableBody");
        tableBody.innerHTML = "";

        // Start iterating from the second row (excluding the index row)
        for (let i = 2; i < steps.length; i++) {
          let row = tableBody.insertRow();

          // Insert plaintext value
          let plaintextCell = row.insertCell();
          plaintextCell.textContent = steps[i][0];
          // Insert plaintext value
          let plaintextCellCharValue = row.insertCell();
          plaintextCellCharValue.textContent = steps[i][1];

          // Insert key adding value
          let keyAddingCell = row.insertCell();
          keyAddingCell.textContent = steps[i][2];

          // Insert modulo 26 value
          let mod26Cell = row.insertCell();
          mod26Cell.textContent = steps[i][3];

          // Insert encrypted character
          let encryptedCell = row.insertCell();
          encryptedCell.textContent = steps[i][4];
        }
      }
    </script>
  </body>
</html>
